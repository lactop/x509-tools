Thu Nov 25 10:28:29 PM +05 2021

Есть некоторая засада в структуре данных. Необходимо завести некоторый вектор, в
которой будет лежать информация о сертификатах, и в котором будут стоять
отметки: вот этот сертификат нужен, а вот этот не нужен.

Информация эта не особо равномерная, и на нужность сертификата С будет влиять
наличие информации о субъектах C в других сертификатах.

При этом, всё должно быть устроено так, чтобы давать пользователю нормальные
сообщения о том, почему принято решение стереть сертификат. А для этого уместно
хранить информацию о

  - пути к файлу,
  - дате истечения,
  - набору субъектов

совместно. В итоге, вырисовывается некая такая структура данных:

  (массив ((путь . время) список-fqdn)

Под списком-fqdn подразумевается список доменных имён во внутреннем формате,
когда для удобства поиска и сортировки "www.imm.uran.ru" хранится в виде списка
'("ru" "uran" "imm" "www").

Так. Затем, с этого массива необходимо снять список пар (fqdn . номер), чтобы
уже с ним работать. Перед формированием массива можно отфильтровать истёкшие
сертификаты. Ok. Хорошо.

Но видится одна проблема: хочется иметь простой интерфейс для доступа полям
массива. Нечто вроде:

  (key i)
  (expire i)
  (subjects i)

Но это всё нужно сконструировать, засунув в контекст массив:

  (define-values (key expire subjects) (certificate-access vector))

Других вариантов особо и нет. В общем, это проблема. Но иначе красиво не
порешать.
